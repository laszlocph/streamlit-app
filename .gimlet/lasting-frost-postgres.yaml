app: postgres
env: lasting-frost
namespace: default
manifests: |
  ---
  apiVersion: source.toolkit.fluxcd.io/v1
  kind: HelmRepository
  metadata:
    name: postgres
    namespace: default
  spec:
    interval: 360m
    url: https://charts.bitnami.com/bitnami
  ---
  apiVersion: helm.toolkit.fluxcd.io/v2
  kind: HelmRelease
  metadata:
    name: postgres
    namespace: default
  spec:
    interval: 60m
    releaseName: postgres
    chart:
      spec:
        chart: postgresql
        version: 15.5.31
        sourceRef:
          kind: HelmRepository
          name: postgres
        interval: 10m
    values:
      commonAnnotations:
        gimlet.io/git-repository: laszlocph/streamlit-app
        gimlet.io/git-sha: '{{ .SHA }}'
        gimlet.io/app: postgres
      auth:
        existingSecret: postgres
      architecture: standalone
      tls:
        enabled: true
        autoGenerated: true
      persistence:
        enabled: true
        size: 8Gi
      persistentVolumeClaimRetentionPolicy:
        enabled: true
        whenScaled: Retain
        whenDeleted: Retain
  ---
  apiVersion: bitnami.com/v1alpha1
  kind: SealedSecret
  metadata:
    name: postgres
    namespace: default
    annotations:
      sealedsecrets.bitnami.com/cluster-wide: "true"
  spec:
    encryptedData:
      postgres-password: "AgDO2ueupOTIMsZRwM6mJhvDPAsT0RmC1snVXdeCKX2LAQe3HIs2N8Djg6BlfWEjrsxY35PPRm3NiKUqMUXkKAS5tjpi5HSZqtNlIndQPt5ug2g8ufOhE7dyFsAmDnydqB3wjuTb3XQWwcX4itNEoU4zhGdE35usw1IU4TE5GrJ2PikIYfE77X04a8tINMnh/4U9swP6vPTjGrZDygpsBPoxR9ljE1aVOnY8nfPvudjtIqDwVc2r2VLFQtnrRJ5WP9zvejA7gxkEHgqJIzJuisxfPaS//Z0ESZoj3328oxja59wnpX5XFIQbHfsBFygyauWfgDdPYdcf566b/xA1evsL4fO/nnPMlCBh8WGyX/DD7s1S6yJgV9b3BWRHeZ2xTl5yK0zLSACpRWoEa6oC/vLGIeEESyjLt108FmurCnIkGuf2JCY8P0h/r2nufid73sUIK3QyEx7VcI/Fh/KZdgVWPKTd7dx2IYH7RNe1CEpn9mnAhZOpy8HFIDIJJwusH53481xjTex4FFpZP2a5ZBRY46y7Yc72jUdCX90jwhoFSmxXXQdxw82NJUKUDnn4X1U7R3jS7JZoBu9xFxkFDpleNlEx7GOB34uX64M9eeLbRHxYyHGbk4nA9MJw8Ii2aniTz0qU9nH2Lx7Q0ndGxxI3DBej81B73FctSJ4KEYZwI8esnGEk0UvEhFEpaeZnX63TBVlm9SqFMqy0YPS0twymyAf6fqJzLcOPHCAJJaiHFBG"
      pgadmin-password: "AgDO2ueupOTIMsZRwM6mJhvDPAsT0RmC1snVXdeCKX2LAQe3HIs2N8Djg6BlfWEjrsxY35PPRm3NiKUqMUXkKAS5tjpi5HSZqtNlIndQPt5ug2g8ufOhE7dyFsAmDnydqB3wjuTb3XQWwcX4itNEoU4zhGdE35usw1IU4TE5GrJ2PikIYfE77X04a8tINMnh/4U9swP6vPTjGrZDygpsBPoxR9ljE1aVOnY8nfPvudjtIqDwVc2r2VLFQtnrRJ5WP9zvejA7gxkEHgqJIzJuisxfPaS//Z0ESZoj3328oxja59wnpX5XFIQbHfsBFygyauWfgDdPYdcf566b/xA1evsL4fO/nnPMlCBh8WGyX/DD7s1S6yJgV9b3BWRHeZ2xTl5yK0zLSACpRWoEa6oC/vLGIeEESyjLt108FmurCnIkGuf2JCY8P0h/r2nufid73sUIK3QyEx7VcI/Fh/KZdgVWPKTd7dx2IYH7RNe1CEpn9mnAhZOpy8HFIDIJJwusH53481xjTex4FFpZP2a5ZBRY46y7Yc72jUdCX90jwhoFSmxXXQdxw82NJUKUDnn4X1U7R3jS7JZoBu9xFxkFDpleNlEx7GOB34uX64M9eeLbRHxYyHGbk4nA9MJw8Ii2aniTz0qU9nH2Lx7Q0ndGxxI3DBej81B73FctSJ4KEYZwI8esnGEk0UvEhFEpaeZnX63TBVlm9SqFMqy0YPS0twymyAf6fqJzLcOPHCAJJaiHFBG"
    template:
      metadata:
        name: postgres
        namespace: default
  ---
  apiVersion: source.toolkit.fluxcd.io/v1
  kind: HelmRepository
  metadata:
    name: runix
    namespace: default
  spec:
    interval: 60m
    url: https://helm.runix.net
  ---
  apiVersion: helm.toolkit.fluxcd.io/v2
  kind: HelmRelease
  metadata:
    name: pgadmin
    namespace: default
  spec:
    interval: 360m
    releaseName: pgadmin
    chart:
      spec:
        chart: pgadmin4
        version: 1.31.0
        sourceRef:
          kind: HelmRepository
          name: runix
        interval: 60m
    values:
      existingSecret: postgres
      secretKeys:
        pgadminPasswordKey: pgadmin-password
      service:
        annotations:
          gimlet.io/git-repository: laszlocph/adapticc
          gimlet.io/git-sha: '{{ .SHA }}'
  ---
  apiVersion: networking.k8s.io/v1
  kind: Ingress
  metadata:
    name: pgadmin
    namespace: default
    annotations:
      kubernetes.io/ingress.class: nginx
  spec:
    tls:
      - hosts:
          - "pgadmin-eyujopnt.gimlet.app"
        secretName: tls-pgadmin
    rules:
      - host: "pgadmin-eyujopnt.gimlet.app"
        http:
          paths:
            - path: "/"
              pathType: "Prefix"
              backend:
                service:
                  name: pgadmin-pgadmin4
                  port:
                    number: 80
